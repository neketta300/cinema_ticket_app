**Лабораторная работа №3: Исследование архитектурного решения**

### Часть 1: Проектирование архитектуры ("To Be")

## 1. Тип приложения
Приложение представляет собой мобильное приложение для бронирования билетов в кинотеатр, разработанное с использованием фреймворка Flutter.

## 2. Стратегия развёртывания
Приложение ориентировано на мобильные устройства (Android и iOS). Деплой осуществляется через магазины приложений (Google Play, App Store). Возможна публикация на Firebase App Distribution для тестирования.

## 3. Обоснование выбора технологии
- **Flutter** позволяет разрабатывать кроссплатформенные мобильные приложения с единым кодом.
- **Dart** обеспечивает высокую производительность и удобен для работы с UI.
- **Использование архитектурных паттернов (MVC, Provider/BLoC)** способствует поддерживаемости и масштабируемости кода.

## 4. Показатели качества
- **Производительность**: использование Flutter обеспечивает высокую скорость рендеринга интерфейса.
- **Масштабируемость**: четкое разделение данных, логики и UI.
- **Удобство использования**: интуитивно понятный интерфейс.
- **Гибкость**: легко расширяется и дополняется новыми функциями.

## 5. Реализация сквозной функциональности
- **Управление состоянием**: рекомендуется использовать Provider или Riverpod для управления состоянием.
- **Навигация**: реализуется с помощью `Navigator` и `MaterialPageRoute`.
- **Сетевые запросы**: (в перспективе) интеграция с внешним API для получения расписания фильмов.
- **Хранение данных**: использование `SharedPreferences` или `Hive` для локального кэширования данных.

## 6. Структурная схема приложения
```plaintext
+------------------+
| UI Layer        |
| (Flutter Widgets)|
+------------------+
       |
       V
+------------------+
| State Management|
| (Provider/BLoC) |
+------------------+
       |
       V
+------------------+
| Data Layer      |
| (Models, API)   |
+------------------+
       |
       V
+------------------+
| External APIs   |
| (Future feature)|
+------------------+
```

### Часть 2: Анализ архитектуры ("As Is")

Анализ кода показывает, что:
- Приложение построено на основе `StatefulWidget` и `StatelessWidget`.
- Основные модули:
  - `Auth` (отображение логирования)
  - `Registr` (отображение регистрации)
  - `HomePageCinema` (отображение фильмов)
  - `MovieDetailPage` (детализация информации о фильме)
  - `ReservationScreen` (экран бронирования мест)
  - `CinemaMainScreen` (главный экран с навигацией)
- Используются списки для хранения данных (`categories`, `movies`, `seats`).
- Отсутствует централизованное управление состоянием.
  
## Диаграмма использования
```plaintext
+------------------+
| UI (Widgets)    |
+------------------+
       |
       V
+------------------+
| Navigation      |
+------------------+
       |
       V
+------------------+
| Data & Logic   |
| (Inside UI)    |
+------------------+
```

### Часть 3: Сравнение и рефакторинг

## 1. Сравнение архитектуры "As Is" и "To Be"
- В текущей реализации логика UI и бизнес-логика смешаны.
- Хранение состояния основано на `setState()`, что усложняет поддержку.
- Отсутствует четкое разделение уровней представления, логики и данных.

## 2. Выделение отличий и анализ причин
- Нет выделенного слоя управления состоянием (Provider, BLoC).
- Структура кода не полностью соответствует паттернам MVVM или MVC.
- Возможные проблемы с масштабируемостью из-за отсутствия сервисного слоя.

## 3. Пути улучшения архитектуры
- Внедрить управление состоянием через **Provider/Riverpod**.
- Разделить бизнес-логику в отдельные сервисные классы.
- Оптимизировать навигацию и переходы между экранами.
- Рассмотреть использование базы данных для хранения бронирований.

## 4. Диаграмма классов
```plaintext
+----------------------+
|      Movie         |
+----------------------+
| - title: String    |
| - genre: String    |
| - rating: double   |
| - duration: int    |
+----------------------+
         |
         V
+----------------------+
|  MovieDetailPage   |
+----------------------+

+----------------------+
|     Category       |
+----------------------+
| - name: String    |
+----------------------+
         |
         V
+----------------------+
|  HomePageCinema   |
+----------------------+
```

# Вывод
Приложение требует рефакторинга для лучшей поддержки и масштабируемости. Введение управления состоянием и разделение логики улучшит архитектуру.

